{% extends 'common/base.html' %}

{% block title %}Dashboard{% endblock %}

{% block container %}
<div>
	<form action="" method="get">
        <p><label for="id_month">Month:</label> <input type="text" name="date" id="id_month"></p>
        <input type="submit" />
    </form>
	<table class="table datatable" id="suppliesTable">
		<thead>
		<tr>
			<th>Date</th>
			<th>Supply</th>
			<th>Qty</th>
			<th>Rate</th>
			<th>Debit</th>
			<th>Total</th>
		</tr>
	</thead><tbody>
		{% for supply in supplies %}
		<tr>
			<td>{{supply.date}}</td>
			<td>{{supply.supplier}}</td>
			<td>{{supply.weight}}</td>
			<td>{{supply.rate}}</td>
			<td>{{supply.debt}}</td>
			<td>{{supply.amount}}</td>
		</tr>
		{% endfor %}
		</tbody>
		<tr>
			<td></td>
			<td></td>
			<td>{{total.weight}}</td>
			<td></td>
			<td></td>
			<td>{{total.total}}</td>
		</tr>
		<tr>
			<td></td>
			<td></td>
			<td>Commission amount (10%)</td>
			<td></td>
			<td></td>
			<td>{{commission}}</td>
		</tr>
		<tr>
			<td></td>
			<td></td>
			<td>Final Amount</td>
			<td></td>
			<td></td>
			<td>{{final_amount}}</td>
		</tr>
	</table>
</div>

<!-- Modal -->
<div class="modal fade" id="myModal" role="dialog">
<div class="modal-dialog">

  <!-- Modal content-->
  <div class="modal-content">
  	<form method="post">
  	{% csrf_token %}
    <div class="modal-header">
      <h4 class="modal-title">Add supply</h4>
      <button type="button" class="close" data-dismiss="modal">&times;</button>
    </div>
    <div class="modal-body">
      {{ form.as_p }}
    </div>
    <div class="modal-footer">
      <button type="submit" class="btn btn-default">Save</button>
      <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
    </div>
    </form>
  </div>
  
</div>
</div>

{% endblock %}

{% block extra_js %}
  <script>
  $(document).ready(function(){
    $( "#id_month" ).datepicker({
    	dateFormat: 'mm-yy',
	 	changeMonth: true,
        changeYear: true,
        showButtonPanel: true,
        onClose: function(dateText, inst) { 
            $(this).datepicker('setDate', new Date(inst.selectedYear, inst.selectedMonth, 1));
        }
    });
  });
  </script>
{% endblock %}